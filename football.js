(function () {
    'use strict';

    // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
    var BASE_URL = 'https://livetv873.me';
    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ AllOrigins, –≤—ñ–Ω —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à–∏–π –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
    var PROXY_–ü–æ–º–∏–ª–∫–∞ `[object Object]` –æ–∑–Ω–∞—á–∞—î, —â–æ –ø–ª–∞–≥—ñ–Ω –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –≤–∏API = 'https://api.allorigins.win/get?url=';

    function Component(object) {
        var comp = new Lampa.InteractionMain(object);

        comp.create = function () {
–≤–µ—Å—Ç–∏ —Ç–µ—Ö–Ω—ñ—á–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫—É, –∞–ª–µ –Ω–µ –º–æ–∂–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ —ó—ó –Ω–∞ —Ç–µ–∫—Å—Ç. –®–≤–∏–¥—à–µ –∑–∞ –≤—Å–µ, —Ü–µ **4            this.activity.loader(true);
            return this.render();
        };

        comp.start03 Forbidden** (—Å–∞–π—Ç –±–ª–æ–∫—É—î –ø—Ä–æ–∫—Å—ñ) –∞–±–æ **404 Not Found**.

–û—Å—å **–≤–∏ = function () {
            this.build();
        };

        comp.build = function () {
            this.activity.head = Lampa.Template.get('head', { title: 'LiveTV –§—É—Ç–±–æ–ª (Fix–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è –ø–ª–∞–≥—ñ–Ω–∞**.

### –©–æ –∑–º—ñ–Ω–µ–Ω–æ:
1.  **–ó–∞–º—ñ–Ω–µ–Ω–æ –ø—Ä–æ–∫—Å—ñ:** –ó–∞–º—ñ)' });
            this.activity.line = Lampa.Template.get('items_line', { title: '–ù–∞–π–±–ª–∏–∂—á—ñ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó' });
            
            this.activity.render().find('.activity__—Å—Ç—å `corsproxy.io` –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ `allorigins.win`. –í—ñ–Ω –ø—Ä–∞—Ü—é—î —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—à–µ –¥–ª—è —Ç–∞–∫–∏—Ö —Å–∞–π—Ç—ñ–≤.
2.  body').append(this.activity.head);
            this.activity.render().find('.activity__body').append(this.activity.line);

            this.loadMainPage();
        };

        comp.load**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–∏–≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫:** –¢–µ–ø–µ—Ä –∑–∞–º—ñ—Å—Ç—å `[object Object]` –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–¥ –ø–æ–º–∏–ª–∫–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 404, 500) –∞–±–æ —Ç–µ–∫—Å—Ç.
3.  **–î–æ–¥–∞–Ω–æ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è:** –î–æ–¥–∞–Ω–æMainPage = function () {
            var _this = this;
            var targetUrl = BASE_URL + '/ua/allupcomingsports/1/';
            var url = PROXY_API + encodeURIComponent(targetUrl);

            console –æ–±—Ä–æ–±–∫—É –∫–æ–¥—É–≤–∞–Ω–Ω—è, —â–æ–± —Ç–µ–∫—Å—Ç –Ω–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é–≤–∞–≤—Å—è –Ω–∞ "–∫—Ä–∞–∫–æ–∑—è–±—Ä–∏".

### –û–Ω–æ–≤–ª–µ–Ω–∏–π –∫–æ–¥ (.log('LiveTV: Requesting', url);

            Lampa.Network.silent(url, function (responselivetv.js)

```javascript
(function () {
    'use strict';

    // –ù–∞) {
                // AllOrigins –ø–æ–≤–µ—Ä—Ç–∞—î JSON, –¥–µ HTML –ª–µ–∂–∏—Ç—å –≤ –ø–æ–ª—ñ .contents
                try {
                    var–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
    var BASE_URL = 'https://livetv873.me'; 
    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ json = JSON.parse(response);
                    if (json.contents) {
                        var items = _this.parseHtml —ñ–Ω—à–∏–π –ø—Ä–æ–∫—Å—ñ, —è–∫–∏–π —á–∞—Å—Ç–æ –∫—Ä–∞—â–µ –æ–±—Ö–æ–¥–∏—Ç—å –∑–∞—Ö–∏—Å—Ç
    var PROXY = 'https://api.allorigins.win(json.contents);
                        if (items.length) {
                            _this.drawItems(items);/raw?url='; 

    function Component(object) {
        var comp = new Lampa.
                        } else {
                            _this.activity.empty();
                            Lampa.Noty.show('InteractionMain(object);

        comp.create = function () {
            this.activity.loader(true);
            return this.render();
        };

        comp.start = function () {
            this.build();
        };

        comp.build = function () {
            this.activity.head = Lampa.–°–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π. –ú–æ–∂–ª–∏–≤–æ –∑–º—ñ–Ω–∏–ª–∞—Å—å –≤–µ—Ä—Å—Ç–∫–∞.');
                        }
                    } else {
                        throw new Error('–ü–æTemplate.get('head', { title: 'LiveTV –§—É—Ç–±–æ–ª' });
            this.activity.line = L—Ä–æ–∂–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ –ø—Ä–æ–∫—Å—ñ');
                    }
                } catch (e) {
                    console.error('ampa.Template.get('items_line', { title: '–ù–∞–π–±–ª–∏–∂—á—ñ —Ç—Ä–∞–Ω—Å–ª—è—Ü—ñ—ó' });
            
            this.activity.render().find('.activity__body').append(this.activity.head);
            this.activity.render().LiveTV Parse Error:', e);
                    Lampa.Noty.show('–ü–æ–º–∏–ª–∫–∞ –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö');find('.activity__body').append(this.activity.line);

            this.loadMainPage();
        
                    _this.activity.empty();
                }
                _this.activity.loader(false);
            }, function (a, c) {
                _this.activity.loader(false);
                // –í–∏–≤–æ–¥–∏–º–æ —Ä–µ–∞–ª—å–Ω—É –ø–æ–º–∏};

        comp.loadMainPage = function () {
            var _this = this;
            var targetUrl = BASE_URL + '/ua/allupcomingsports/1/';
            var url = PROXY + encode–ª–∫—É –∑–∞–º—ñ—Å—Ç—å [object Object]
                var errorText = (c && c.statusText) ? c.statusText :URIComponent(targetUrl);

            console.log('LiveTV: –ó–∞–ø–∏—Ç –Ω–∞', url);

            Lampa.Network.silent '–ü–æ–º–∏–ª–∫–∞ –∑\'—î–¥–Ω–∞–Ω–Ω—è';
                Lampa.Noty.show('–ú–µ—Ä–µ–∂–∞: ' + errorText);(url, function (html) {
                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –Ω–µ –ø–æ–≤–µ—Ä–Ω—É–≤ –ø—Ä–æ–∫—Å—ñ –ø–æ–º–∏–ª–∫—É –≤
            });
        };

        comp.parseHtml = function (html) {
            var doc = new —Ç–µ–∫—Å—Ç—ñ
                if (html.length < 500 || html.includes('403 Forbidden') || html.includes('Access DOMParser().parseFromString(html, 'text/html');
            var items = [];
            
            // Denied')) {
                    Lampa.Noty.show('–ü–æ–º–∏–ª–∫–∞: –°–∞–π—Ç –∑–∞–±–ª–æ–∫—É–≤–∞–≤ –∑–∞–ø–∏—Ç ( –®—É–∫–∞—î–º–æ —Ç–∞–±–ª–∏—Ü—ñ –º–∞—Ç—á—ñ–≤
            var elements = doc.querySelectorAll('a.live');

            elements.403)');
                    _this.activity.empty();
                    _this.activity.loader(false);forEach(function (el) {
                var url = el.getAttribute('href');
                if (!url ||
                    return;
                }

                var items = _this.parseHtml(html);
                
                 url.indexOf('eventinfo') === -1) return;

                var title = el.innerText.trim();if (items.length) {
                    _this.drawItems(items);
                } else {
                    
                
                // –û–ø–∏—Å (—á–∞—Å —ñ –ª—ñ–≥–∞)
                var descEl = el.parentNode.querySelector('.evdesc_this.activity.empty();
                    Lampa.Noty.show('–°–ø–∏—Å–æ–∫ –ø—É—Å—Ç–∏–π. –ú–æ–∂–ª–∏–≤–æ,');
                var subtitle = descEl ? descEl.innerText.replace(/[\n\r]+/g, ' ').trim() : '';

                 –∑–º—ñ–Ω–∏–ª–∞—Å—å –≤–µ—Ä—Å—Ç–∫–∞.');
                }
                _this.activity.loader(false);
            }, function (a// –Ü–∫–æ–Ω–∫–∞ (—à—É–∫–∞—î–º–æ img —É –±–∞—Ç—å–∫—ñ–≤—Å—å–∫—ñ–π —Ç–∞–±–ª–∏—Ü—ñ)
                var img = './img/img_broken.svg';
                var parentTable = el.closest('table');
                if(parentTable) {
                    var img, c) {
                _this.activity.loader(false);
                // –ù–æ—Ä–º–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥ –ø–æ–º–∏–ª–∫–∏
El = parentTable.querySelector('img');
                    if(imgEl && imgEl.src) {
                                        var errorMsg = '–ú–µ—Ä–µ–∂–∞: ';
                if (a && a.status) errorMsg += a.status; 
                else if (typeof c === 'string') errorMsg += c;
                else errorMsg += '–ù–µ// AllOrigins —ñ–Ω–æ–¥—ñ –ª–∞–º–∞—î –≤—ñ–¥–Ω–æ—Å–Ω—ñ —à–ª—è—Ö–∏, –≤—ñ–¥–Ω–æ–≤–ª—é—î–º–æ —ó—Ö
                        var src = imgEl.–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞';
                
                Lampa.Noty.show(errorMsg);
                console.getAttribute('src');
                        if (src.startsWith('//')) img = 'https:' + src;
                        else iferror('LiveTV Error:', a);
            });
        };

        comp.parseHtml = function (html (src.startsWith('/')) img = BASE_URL + src;
                        else img = src;
                    }
                }

                // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Live
                var isLive = el.parentNode.innerHTML.includes('live.gif');
                if(isLive) subtitle = 'üî¥ ' + subtitle;

                items.push({
                    title: title,
                    subtitle: subtitle,
                    url: url.startsWith('http') ?) {
            var doc = new DOMParser().parseFromString(html, 'text/html');
            var url : BASE_URL + url,
                    img: img
                });
            });

            // –í–∏–¥–∞ items = [];
            
            var elements = doc.querySelectorAll('a.live');

            elements.forEach(function (el) {
                var url = el.getAttribute('href');
                if (!url || url.indexOf('eventinfo') === -1) return;

                var title = el.innerText.trim();
                var descEl = el.parentNode.querySelector('.evdesc');
                var subtitle = descEl ? descEl.–ª—è—î–º–æ –¥—É–±–ª—ñ–∫–∞—Ç–∏
            return items.filter((v,i,a)=>a.findIndex(t=>(t.url===v.url))===i);
        };

        comp.drawItems = function (innerText.replace(/[\n\r]+/g, ' ').trim() : '';

                var img = './img/img_broken.svg';
                var parentTable = el.closest('table');
                if(parentitems) {
            var _this = this;
            items.forEach(function (item) {
                var card = LTable) {
                    var imgEl = parentTable.querySelector('img');
                    if(imgEl && imgampa.Template.get('card', {
                    title: item.title,
                    release_year: itemEl.src) {
                        var rawSrc = imgEl.getAttribute('src');
                        if (rawSrc.startsWith('//')) img = 'https:' + rawSrc;
                        else if (rawSrc.startsWith('/')) img.subtitle
                });

                card.find('.card__img').attr('src', item.img).css({
                    'object- = BASE_URL + rawSrc;
                        else img = rawSrc;
                    }
                }

                fit': 'contain',
                    'padding': '10px',
                    'background': '#e0e0e0'
var isLive = el.parentNode.innerHTML.includes('live.gif');
                if(isLive) subtitle = 'üî¥ ' + subtitle;

                items.push({
                    title: title,
                    subtitle: subtitle                });

                card.on('hover:enter', function () {
                    // –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –≤ –Ω–æ–≤–æ–º—É –≤—ñ–∫–Ω—ñ/–±—Ä–∞—É–∑–µ—Ä—ñ, –±–æ –≤—ñ–¥–µ–æ –Ω–∞ LiveTV 
                    // –¥—É–∂–µ —Å–∫–ª–∞–¥–Ω–æ –≤–∏—Ç—è–≥–Ω—É—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏,
                    url: url.startsWith('http') ? url : BASE_URL + url,
                    img: img
                });
            });

            return items.filter((v,i,a)=>a.findIndex(t=>(t.url===v.url))===i);
        };

        comp.drawItems =—á–Ω–æ —á–µ—Ä–µ–∑ –∑–∞—Ö–∏—Å—Ç
                    Lampa.Select.show({
                        title: item.title,
                        items: [ function (items) {
            var _this = this;
            items.forEach(function (item) {
                var card = Lampa.Template.get('card', {
                    title: item.title,
                    release_year: item
                            {title: '–í—ñ–¥–∫—Ä–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –º–∞—Ç—á—É (–ë—Ä–∞—É–∑–µ—Ä)', id: 'browser'}
                        ],
.subtitle
                });

                card.find('.card__img').attr('src', item.img).css({
                    'object-                        onSelect: function(a) {
                            if(a.id == 'browser') {
                                // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å–∏—Å—Ç–µ–º–Ω–∏–π –º–µ—Ç–æ–¥ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –ø–æ—Å–∏–ª–∞–Ω—å
                                if(Lampa.Platform.is('android')) Lampa.Android.open(item.url);
                                else window.open(item.url, '_blank');
                            }
                        }
                    });
                });
                _this.activity.line.append(card);
            });
        };

        return comp;
    }

    function startPlugin() {
        window.plugin_livetv_fix = true;
        Lampa.Component.add('livetv_fix', Component);
        
        var btn = $('<li class="menu__item selector" data-action="livetv_fix"><div class="menu__ico"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 fit': 'contain',
                    'padding': '15px',
                    'background': '#f0f0f0'
                });

                card.on('hover:enter', function () {
                    _this.openMatch(item.url, item.title);
                });
                _this.activity.line.append(card);
            });
        };

        comp.openMatch = function (url, title) {
            Lampa.Loading.start();
            // –î–ª—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –º–∞—Ç—á—É —Ç–µ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –Ω–æ–≤–∏–π –ø—Ä–æ–∫—Å—ñ
            var proxyUrl = PROXY + encodeURIComponent(url);

            Lampa.Network.silent(proxyUrl, function (html) {
                Lampa.Loading.stop();
                var doc = new DOMParser().parseFromString(html0 1 0 10 10A10 10 0 0 0 , 'text/html');
                var foundLink = null;

                // 1. –®—É–∫–∞—î–º–æ if12 2zm0 18a8 8 0 1 1 8-8 rames
                var iframes = doc.querySelectorAll('iframe');
                for(var i=0; i<8 8 0 0 1-8 8z"/><path d="M12 7viframes.length; i++) {
                    var src = iframes[i].getAttribute('src') || '';5l4.2 2.5"/></svg></div><div class="menu__text">LiveTV Fix
                    if(src.includes('youtube') || src.includes('player') || src.includes('video')) {
                        if(src.startsWith('//')) src = 'https:' + src;
                        foundLink = src</div></li>');
        
        btn.on('hover:enter click', function () {
            Lampa.Activity.push({ url: '', title: 'LiveTV Fix', component: 'livetv_fix', page: 1 });
        ;
                        break;
                    }
                }

                // 2. –®—É–∫–∞—î–º–æ webplayer
                if(!foundLink) {
                    var webplayerLink = doc.querySelector('a[href*="webplayer.php"]');
                    if});

        if ($('.menu .menu__list').length) {
            $('.menu .menu__list').append(btn);(webplayerLink) {
                        var href = webplayerLink.getAttribute('href');
                        if(href
        } else {
            // –§–æ–ª–±–µ–∫ –¥–ª—è —Å—Ç–∞—Ä–∏—Ö –≤–µ—Ä—Å—ñ–π
            $('.activity__menu .activity.startsWith('//')) href = 'https:' + href;
                        else if(href.startsWith('/')) href__menu-list').append(btn);
        }
    }

    if (!window.plugin_liv = BASE_URL + href;
                        foundLink = href; 
                    }
                }

                ifetv_fix) {
        if (window.appready) startPlugin();
        else Lampa. (foundLink) {
                    if(foundLink.includes('webplayer.php')) {
                        LampaListener.follow('app', function (e) { if (e.type == 'ready') startPlugin(); });.Select.show({
                            title: '–ü–ª–µ—î—Ä',
                            items: [{title: '–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É
    }
})();
